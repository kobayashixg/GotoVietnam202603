<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vietnamese Intro Practice</title>
  <style>
    :root {
      --bg-main: #050814;
      --bg-elevated: #0d1020;
      --bg-elevated-soft: #121527;
      --accent-red: #e53935;
      --accent-yellow: #ffeb3b;
      --text-main: #f5f7ff;
      --text-muted: #a3acc9;
      --border-subtle: rgba(255, 255, 255, 0.06);
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.65);
      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-pill: 999px;
      --nav-height: 64px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", "Noto Sans JP", sans-serif;
      background: radial-gradient(circle at top left, #101633 0, #050814 45%, #000 100%);
      color: var(--text-main);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    a { color: inherit; }

    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--nav-height);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(16px);
      background: linear-gradient(to right, rgba(5, 8, 20, 0.94), rgba(2, 3, 8, 0.96));
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }

    .nav-inner {
      width: 100%;
      max-width: 1120px;
      padding: 0 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .nav-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.95rem;
      color: var(--text-muted);
      white-space: nowrap;
      min-width: 0;
    }

    .nav-logo em { font-style: normal; font-weight: 700; color: var(--accent-yellow); }

    .nav-actions {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 8px;
    }

    .nav-link {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(255, 255, 255, 0.16);
      padding: 6px 12px;
      font-size: 0.8rem;
      color: var(--text-muted);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease, transform 0.1s ease;
      background: rgba(5, 9, 26, 0.9);
      cursor: pointer;
    }

    .nav-link:hover {
      background: rgba(229, 57, 53, 0.16);
      border-color: rgba(229, 57, 53, 0.8);
      color: #fff;
      transform: translateY(-1px);
    }

    .nav-link.nav-primary {
      background: linear-gradient(135deg, var(--accent-red), #ff9800);
      border-color: transparent;
      color: #050814;
      font-weight: 900;
    }

    .page-wrapper {
      max-width: 1120px;
      margin: 0 auto;
      padding: calc(var(--nav-height) + 18px) 20px 40px;
    }

    .section-card {
      background: linear-gradient(145deg, rgba(7, 10, 30, 0.98), rgba(4, 6, 18, 0.98));
      border-radius: var(--radius-lg);
      padding: 20px 18px 18px;
      border: 1px solid var(--border-subtle);
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.65);
    }

    .section-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 14px;
      flex-wrap: wrap;
    }

    .section-title {
      font-size: 1.05rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-subtitle {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .note {
      margin: 12px 0 16px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(3, 8, 30, 0.9);
      color: var(--text-muted);
      font-size: 0.82rem;
      line-height: 1.4;
    }

    .phrases {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .phrase {
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(3, 8, 30, 0.9);
      overflow: hidden;
    }

    .phrase-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 12px 12px 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(5, 9, 26, 0.86);
    }

    .phrase-title {
      font-weight: 900;
      font-size: 0.95rem;
    }

    .phrase-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .btn {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(255, 255, 255, 0.16);
      padding: 6px 10px;
      font-size: 0.78rem;
      background: rgba(5, 9, 26, 0.9);
      color: var(--text-muted);
      cursor: pointer;
      transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease, transform 0.1s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      user-select: none;
    }

    .btn:hover {
      background: rgba(229, 57, 53, 0.16);
      border-color: rgba(229, 57, 53, 0.8);
      color: #fff;
      transform: translateY(-1px);
    }

    .btn.primary {
      background: linear-gradient(135deg, var(--accent-red), #ff9800);
      border-color: transparent;
      color: #050814;
      font-weight: 900;
    }

    .phrase-body {
      padding: 12px;
      display: grid;
      gap: 10px;
    }

    .row {
      display: grid;
      grid-template-columns: 120px 1fr;
      gap: 10px;
      align-items: start;
    }

    @media (max-width: 520px) {
      .row { grid-template-columns: 96px 1fr; }
    }

    .label {
      color: var(--text-muted);
      font-size: 0.78rem;
      padding-top: 2px;
      white-space: nowrap;
    }

    .text {
      line-height: 1.35;
      font-size: 1rem;
      word-break: break-word;
    }

    .text.small {
      font-size: 0.92rem;
      color: var(--text-muted);
    }

    .status {
      margin-top: 10px;
      color: var(--text-muted);
      font-size: 0.78rem;
      min-height: 1.2em;
    }

    .category-nav {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 10px 0 16px;
      position: sticky;
      top: calc(var(--nav-height) + 10px);
      z-index: 900;
      padding: 10px 10px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.10);
      background: rgba(3, 8, 30, 0.92);
      backdrop-filter: blur(10px);
    }

    .category-block {
      padding-top: 6px;
      scroll-margin-top: calc(var(--nav-height) + 110px);
    }

    .category-head {
      appearance: none;
      -webkit-appearance: none;
      width: 100%;
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      margin: 12px 0 10px;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.10);
      background: rgba(5, 9, 26, 0.75);
      color: inherit;
      font: inherit;
      text-align: left;
      cursor: pointer;
      user-select: none;
    }

    .category-head:hover {
      background: rgba(229, 57, 53, 0.10);
      border-color: rgba(229, 57, 53, 0.55);
    }

    .category-head:focus-visible {
      outline: 2px solid rgba(255, 235, 59, 0.60);
      outline-offset: 2px;
    }

    .category-title {
      font-weight: 900;
      font-size: 0.95rem;
    }

    .category-count {
      font-size: 0.78rem;
      color: var(--text-muted);
      white-space: nowrap;
    }

    .category-phrases {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .category-block[data-open="0"] .category-phrases {
      display: none;
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="nav-inner">
      <div class="nav-logo">
        <span><em id="nav-accent">HBA</em></span>
        <span id="nav-title">Vietnam Trip</span>
      </div>
      <div class="nav-actions">
        <a class="nav-link" href="index.html" id="back-link">Back</a>
        <button class="nav-link nav-primary" id="stop-all" type="button">Stop</button>
      </div>
    </div>
  </nav>

  <div class="page-wrapper">
    <main>
      <section class="section-card">
        <div class="section-header">
          <h1 class="section-title" id="page-title">Title</h1>
          <p class="section-subtitle" id="page-subtitle">Subtitle</p>
        </div>

        <div class="note" id="note">Note</div>

        <div class="category-nav" id="category-nav"></div>

        <div class="phrases" id="phrases"></div>

        <div class="status" id="status"></div>
      </section>
    </main>
  </div>

  <script>
    const UI = {
      navAccent: '\u0056\u0069\u0065\u0074\u006e\u0061\u006d\u0065\u0073\u0065',
      navTitle: '\u0049\u006e\u0074\u0072\u006f\u0020\u0050\u0072\u0061\u0063\u0074\u0069\u0063\u0065',
      back: '\u2b05\ufe0f\u0020\u4e00\u89a7\u3078\u623b\u308b',
      stop: '\u25a0\u0020\u505c\u6b62',
      title: '\u30d9\u30c8\u30ca\u30e0\u8a9e\uff1a\u7c21\u5358\u306a\u6328\u62f6\u0020\u0026\u0020\u81ea\u5df1\u7d39\u4ecb',
      subtitle: '\u65e5\u672c\u8a9e\u0020\u002f\u0020\u30d9\u30c8\u30ca\u30e0\u8a9e\u0020\u002f\u0020\u30ab\u30bf\u30ab\u30ca\uff08\u6291\u63da\u76ee\u5b89\u4ed8\u304d\uff09\u0020\u002b\u0020\u97f3\u58f0\uff08VN\u306e\u307f\uff09\u0020\u002f\u0020\u30ab\u30c6\u30b4\u30ea\u5225',
      note: '\u97f3\u58f0\u306f\u30d6\u30e9\u30a6\u30b6\u306e\u8aad\u307f\u4e0a\u3052\uff08Web Speech API\uff09\u3092\u4f7f\u3044\u307e\u3059\u3002\u30c6\u30ad\u30b9\u30c8\u3060\u3051\u3067\u3082\u7df4\u7fd2\u3067\u304d\u307e\u3059\u3002\u4e0a\u306e\u30ab\u30c6\u30b4\u30ea\u30dc\u30bf\u30f3\u3067\u30b8\u30e3\u30f3\u30d7\u3067\u304d\u307e\u3059\u3002\u0020\u6291\u63da\u306f\u3042\u304f\u307e\u3067\u76ee\u5b89\uff1a\u0020\u2197\ufe0f\u4e0a\u3052\u0020\u002f\u0020\u2934\ufe0f\u5f37\u304f\u4e0a\u3052\u0020\u002f\u0020\u2198\ufe0f\u4e0b\u3052\u0020\u002f\u0020\u2935\ufe0f\u5f37\u304f\u4e0b\u3052',
      labels: {
        jp: '\u65e5\u672c\u8a9e',
        vi: '\u30d9\u30c8\u30ca\u30e0\u8a9e',
        kataTone: '\u30ab\u30bf\u30ab\u30ca\u002b\u6291\u63da',
        playVN: '\u25b6\u0020VN',
        playJP: ''
      }
    };

    const TONE = {
      up: '\u2197\ufe0f',
      strongUp: '\u2934\ufe0f',
      down: '\u2198\ufe0f',
      strongDown: '\u2935\ufe0f'
    };

    const CATEGORIES = [
      {
        "id": "basic",
        "label": "\u6328\u62f6\u30fb\u57fa\u672c"
      },
      {
        "id": "self",
        "label": "\u81ea\u5df1\u7d39\u4ecb"
      },
      {
        "id": "restaurant",
        "label": "\u30ec\u30b9\u30c8\u30e9\u30f3\uff08\u5165\u5e97\u30fb\u5e2d\uff09"
      },
      {
        "id": "order",
        "label": "\u6ce8\u6587\uff08\u98f2\u307f\u7269\u30fb\u8ffd\u52a0\uff09"
      },
      {
        "id": "prefs",
        "label": "\u597d\u307f\u30fb\u30a2\u30ec\u30eb\u30ae\u30fc"
      },
      {
        "id": "compliment",
        "label": "\u611f\u60f3\uff08\u304a\u3044\u3057\u3044\u7b49\uff09"
      },
      {
        "id": "payment",
        "label": "\u4f1a\u8a08\u30fb\u6301\u3061\u5e30\u308a"
      },
      {
        "id": "toast",
        "label": "\u4e7e\u676f"
      },
      {
        "id": "help",
        "label": "\u56f0\u3063\u305f\u3068\u304d"
      }
    ];

    const PHRASES = [
      {
        "cat": "basic",
        "title": "\u3053\u3093\u306b\u3061\u306f",
        "jp": "\u3053\u3093\u306b\u3061\u306f\u3002",
        "vi": "Xin chao.",
        "katakana": "\u30b7\u30f3 \u30c1\u30e3\u30aa"
      },
      {
        "cat": "basic",
        "title": "\u304a\u306f\u3088\u3046",
        "jp": "\u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059\u3002",
        "vi": "Chao buoi sang.",
        "katakana": "\u30c1\u30e3\u30aa \u30d6\u30a9\u30a4 \u30b5\u30f3"
      },
      {
        "cat": "basic",
        "title": "\u3053\u3093\u3070\u3093\u306f",
        "jp": "\u3053\u3093\u3070\u3093\u306f\u3002",
        "vi": "Chao buoi toi.",
        "katakana": "\u30c1\u30e3\u30aa \u30d6\u30a9\u30a4 \u30c8\u30a4"
      },
      {
        "cat": "basic",
        "title": "\u307e\u305f\u4f1a\u3044\u307e\u3057\u3087\u3046",
        "jp": "\u307e\u305f\u4f1a\u3044\u307e\u3057\u3087\u3046\u3002",
        "vi": "Hen gap lai.",
        "katakana": "\u30d8\u30f3 \u30ac\u30c3\u30d7 \u30e9\u30a4"
      },
      {
        "cat": "basic",
        "title": "\u3042\u308a\u304c\u3068\u3046",
        "jp": "\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002",
        "vi": "Cam on.",
        "katakana": "\u30ab\u30e0 \u30aa\u30f3"
      },
      {
        "cat": "basic",
        "title": "\u3059\u307f\u307e\u305b\u3093",
        "jp": "\u3059\u307f\u307e\u305b\u3093\u3002",
        "vi": "Xin loi.",
        "katakana": "\u30b7\u30f3 \u30ed\u30a4"
      },
      {
        "cat": "basic",
        "title": "\u306f\u3044",
        "jp": "\u306f\u3044\u3002",
        "vi": "Vang.",
        "katakana": "\u30f4\u30a1\u30f3"
      },
      {
        "cat": "basic",
        "title": "\u3044\u3044\u3048",
        "jp": "\u3044\u3044\u3048\u3002",
        "vi": "Khong.",
        "katakana": "\u30b3\u30f3"
      },
      {
        "cat": "basic",
        "title": "\u3061\u3087\u3063\u3068\u805e\u3044\u3066\u3044\u3044\uff1f",
        "jp": "\u3061\u3087\u3063\u3068\u805e\u3044\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f",
        "vi": "Cho toi hoi mot chut, duoc khong?",
        "katakana": "\u30c1\u30e7 \u30c8\u30a4 \u30db\u30a4 \u30e2\u30c3 \u30c1\u30e5\u30c3\u30c8 \u30c9\u30a5\u30aa\u30c3\u30af \u30b3\u30f3"
      },
      {
        "cat": "self",
        "title": "\u306f\u3058\u3081\u307e\u3057\u3066",
        "jp": "\u306f\u3058\u3081\u307e\u3057\u3066\u3002",
        "vi": "Rat vui duoc gap ban.",
        "katakana": "\u30e9\u30c3 \u30f4\u30a4 \u30c9\u30a5\u30aa\u30c3\u30af \u30ac\u30c3\u30d7 \u30d0\u30f3"
      },
      {
        "cat": "self",
        "title": "\u540d\u524d",
        "jp": "\u79c1\u306f\uff08\u540d\u524d\uff09\u3067\u3059\u3002",
        "vi": "Toi ten la (ten).",
        "katakana": "\u30c8\u30a4 \u30c6\u30f3 \u30e9\uff08\u30c6\u30f3\uff09"
      },
      {
        "cat": "self",
        "title": "\u51fa\u8eab",
        "jp": "\u65e5\u672c\u304b\u3089\u6765\u307e\u3057\u305f\u3002",
        "vi": "Toi den tu Nhat Ban.",
        "katakana": "\u30c8\u30a4 \u30c7\u30f3 \u30c8\u30a5 \u30cb\u30e3\u30c3\u30c8 \u30d0\u30f3"
      },
      {
        "cat": "self",
        "title": "\u4f1a\u793e",
        "jp": "\uff08\u4f1a\u793e\uff09\u3067\u50cd\u3044\u3066\u3044\u307e\u3059\u3002",
        "vi": "Toi lam viec o (cong ty).",
        "katakana": "\u30c8\u30a4 \u30e9\u30e0 \u30f4\u30a3\u30a8\u30c3\u30af \u30aa\uff08\u30b3\u30f3 \u30c6\u30a3\uff09"
      },
      {
        "cat": "self",
        "title": "\u62c5\u5f53",
        "jp": "\u79c1\u306f\uff08\u62c5\u5f53\uff09\u3092\u62c5\u5f53\u3057\u3066\u3044\u307e\u3059\u3002",
        "vi": "Toi phu trach (phan viec nay).",
        "katakana": "\u30c8\u30a4 \u30d5 \u30c1\u30e3\u30c3\u30af\uff08\u30d5\u30a1\u30f3 \u30f4\u30a3\u30a8\u30c3\u30af \u30ca\u30a4\uff09"
      },
      {
        "cat": "self",
        "title": "\u540d\u523a",
        "jp": "\u3053\u3061\u3089\u306f\u540d\u523a\u3067\u3059\u3002",
        "vi": "Day la danh thiep cua toi.",
        "katakana": "\u30c0\u30a4 \u30e9 \u30b6\u30f3 \u30c6\u30a3\u30a8\u30c3\u30d7 \u30af\u30a2 \u30c8\u30a4"
      },
      {
        "cat": "self",
        "title": "\u30d9\u30c8\u30ca\u30e0\u8a9e\u82e6\u624b",
        "jp": "\u30d9\u30c8\u30ca\u30e0\u8a9e\u306f\u3042\u307e\u308a\u5f97\u610f\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
        "vi": "Toi khong noi tieng Viet gioi.",
        "katakana": "\u30c8\u30a4 \u30b3\u30f3 \u30ce\u30a4 \u30c6\u30a3\u30a8\u30f3 \u30f4\u30a3\u30a8\u30c3\u30c8 \u30be\u30a4"
      },
      {
        "cat": "self",
        "title": "\u3086\u3063\u304f\u308a",
        "jp": "\u3086\u3063\u304f\u308a\u8a71\u3057\u3066\u3082\u3089\u3048\u307e\u3059\u304b\uff1f",
        "vi": "Ban co the noi cham lai khong?",
        "katakana": "\u30d0\u30f3 \u30b3 \u30c6 \u30ce\u30a4 \u30c1\u30e3\u30e0 \u30e9\u30a4 \u30b3\u30f3"
      },
      {
        "cat": "self",
        "title": "\u82f1\u8a9eOK?",
        "jp": "\u82f1\u8a9e\u306f\u8a71\u305b\u307e\u3059\u304b\uff1f",
        "vi": "Ban co noi tieng Anh khong?",
        "katakana": "\u30d0\u30f3 \u30b3 \u30ce\u30a4 \u30c6\u30a3\u30a8\u30f3 \u30a2\u30a4\u30f3 \u30b3\u30f3"
      },
      {
        "cat": "self",
        "title": "\u3088\u308d\u3057\u304f",
        "jp": "\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\u3002",
        "vi": "Rat mong duoc hop tac voi ban.",
        "katakana": "\u30e9\u30c3 \u30e2\u30f3 \u30c9\u30a5\u30aa\u30c3\u30af \u30db\u30c3\u30d7 \u30bf\u30c3\u30af \u30f4\u30a9\u30a4 \u30d0\u30f3"
      },
      {
        "cat": "restaurant",
        "title": "2\u4eba\u5e2d",
        "jp": "2\u4eba\u3067\u3059\u3002",
        "vi": "Cho toi mot ban cho hai nguoi.",
        "katakana": "\u30c1\u30e7 \u30c8\u30a4 \u30e2\u30c3 \u30d0\u30f3 \u30c1\u30e7 \u30cf\u30a4 \u30b0\u30aa\u30a4"
      },
      {
        "cat": "restaurant",
        "title": "\u4e88\u7d04",
        "jp": "\u4e88\u7d04\u3057\u3066\u3044\u307e\u3059\u3002",
        "vi": "Toi co dat ban.",
        "katakana": "\u30c8\u30a4 \u30b3 \u30c0\u30c3 \u30d0\u30f3"
      },
      {
        "cat": "restaurant",
        "title": "\u30e1\u30cb\u30e5\u30fc",
        "jp": "\u30e1\u30cb\u30e5\u30fc\u3092\u898b\u305b\u3066\u304f\u3060\u3055\u3044\u3002",
        "vi": "Cho toi xem thuc don.",
        "katakana": "\u30c1\u30e7 \u30c8\u30a4 \u30bb\u30e0 \u30c8\u30a5\u30c3\u30af \u30c9\u30f3"
      },
      {
        "cat": "restaurant",
        "title": "\u304a\u3059\u3059\u3081",
        "jp": "\u304a\u3059\u3059\u3081\u306f\u4f55\u3067\u3059\u304b\uff1f",
        "vi": "Ban goi y mon nao?",
        "katakana": "\u30d0\u30f3 \u30b4\u30a4 \u30a4 \u30e2\u30f3 \u30ca\u30aa"
      },
      {
        "cat": "restaurant",
        "title": "\u30c8\u30a4\u30ec",
        "jp": "\u30c8\u30a4\u30ec\u306f\u3069\u3053\u3067\u3059\u304b\uff1f",
        "vi": "Nha ve sinh o dau?",
        "katakana": "\u30cb\u30e3 \u30f4\u30a7 \u30b7\u30f3 \u30aa\u30fc \u30c0\u30a6"
      },
      {
        "cat": "order",
        "title": "\u3053\u308c\u304f\u3060\u3055\u3044",
        "jp": "\u3053\u308c\u3092\u304f\u3060\u3055\u3044\u3002",
        "vi": "Cho toi mon nay.",
        "katakana": "\u30c1\u30e7 \u30c8\u30a4 \u30e2\u30f3 \u30ca\u30a4"
      },
      {
        "cat": "order",
        "title": "\u8ffd\u52a0\u6ce8\u6587",
        "jp": "\u8ffd\u52a0\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002",
        "vi": "Cho toi goi them (mon nay).",
        "katakana": "\u30c1\u30e7 \u30c8\u30a4 \u30b4\u30a4 \u30c6\u30e0\uff08\u30e2\u30f3 \u30ca\u30a4\uff09"
      },
      {
        "cat": "order",
        "title": "\u6c34",
        "jp": "\u304a\u6c34\u3092\u304f\u3060\u3055\u3044\u3002",
        "vi": "Cho toi nuoc loc.",
        "katakana": "\u30c1\u30e7 \u30c8\u30a4 \u30cc\u30aa\u30c3\u30af \u30ed\u30c3\u30af"
      },
      {
        "cat": "order",
        "title": "\u30d3\u30fc\u30eb",
        "jp": "\u30d3\u30fc\u30eb\u3092\u304f\u3060\u3055\u3044\u3002",
        "vi": "Cho toi bia.",
        "katakana": "\u30c1\u30e7 \u30c8\u30a4 \u30d3\u30a2"
      },
      {
        "cat": "order",
        "title": "\u6c37\u306a\u3057",
        "jp": "\u6c37\u306a\u3057\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002",
        "vi": "Khong da.",
        "katakana": "\u30b3\u30f3 \u30c0\u30fc"
      },
      {
        "cat": "order",
        "title": "\u6c37\u5c11\u306a\u3081",
        "jp": "\u6c37\u5c11\u306a\u3081\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002",
        "vi": "It da.",
        "katakana": "\u30a4\u30c3 \u30c0\u30fc"
      },
      {
        "cat": "prefs",
        "title": "\u8f9b\u304f\u3057\u306a\u3044\u3067",
        "jp": "\u8f9b\u304f\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002",
        "vi": "Lam on dung cay.",
        "katakana": "\u30e9\u30e0 \u30aa\u30f3 \u30c9\u30a5\u30f3 \u30ab\u30a4"
      },
      {
        "cat": "prefs",
        "title": "\u8f9b\u3055\u5c11\u3057",
        "jp": "\u5c11\u3057\u8f9b\u304f\u3057\u3066\u304f\u3060\u3055\u3044\u3002",
        "vi": "Cay mot chut.",
        "katakana": "\u30ab\u30a4 \u30e2\u30c3 \u30c1\u30e5\u30c3\u30c8"
      },
      {
        "cat": "prefs",
        "title": "\u8f9b\u304f\u306a\u3044",
        "jp": "\u8f9b\u304f\u306a\u3044\u306e\u304c\u3044\u3044\u3067\u3059\u3002",
        "vi": "Khong cay.",
        "katakana": "\u30b3\u30f3 \u30ab\u30a4"
      },
      {
        "cat": "prefs",
        "title": "\u30a2\u30ec\u30eb\u30ae\u30fc",
        "jp": "\u30a2\u30ec\u30eb\u30ae\u30fc\u304c\u3042\u308a\u307e\u3059\u3002",
        "vi": "Toi bi di ung.",
        "katakana": "\u30c8\u30a4 \u30d3 \u30ba\u30a3 \u30a6\u30f3"
      },
      {
        "cat": "prefs",
        "title": "\u30d4\u30fc\u30ca\u30c3\u30c4\u7121\u3057",
        "jp": "\u30d4\u30fc\u30ca\u30c3\u30c4\u306f\u5165\u308c\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002",
        "vi": "Khong co dau phong.",
        "katakana": "\u30b3\u30f3 \u30b3 \u30c0\u30a6 \u30d5\u30a9\u30f3"
      },
      {
        "cat": "prefs",
        "title": "\u8c5a\u306a\u3057",
        "jp": "\u8c5a\u8089\u306a\u3057\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002",
        "vi": "Khong thit heo.",
        "katakana": "\u30b3\u30f3 \u30c6\u30a3\u30c3\u30c8 \u30d8\u30aa"
      },
      {
        "cat": "prefs",
        "title": "\u725b\u306a\u3057",
        "jp": "\u725b\u8089\u306a\u3057\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002",
        "vi": "Khong thit bo.",
        "katakana": "\u30b3\u30f3 \u30c6\u30a3\u30c3\u30c8 \u30dc\u30fc"
      },
      {
        "cat": "prefs",
        "title": "\u6d77\u9bae\u306a\u3057",
        "jp": "\u6d77\u9bae\u306a\u3057\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002",
        "vi": "Khong hai san.",
        "katakana": "\u30b3\u30f3 \u30cf\u30a4 \u30b5\u30f3"
      },
      {
        "cat": "compliment",
        "title": "\u304a\u3044\u3057\u3044",
        "jp": "\u304a\u3044\u3057\u3044\uff01",
        "vi": "Ngon qua!",
        "katakana": "\u30b4\u30f3 \u30af\u30a2"
      },
      {
        "cat": "compliment",
        "title": "\u3068\u3066\u3082\u304a\u3044\u3057\u3044",
        "jp": "\u3068\u3066\u3082\u304a\u3044\u3057\u3044\u3067\u3059\u3002",
        "vi": "Rat ngon.",
        "katakana": "\u30e9\u30c3 \u30b4\u30f3"
      },
      {
        "cat": "compliment",
        "title": "\u6700\u9ad8",
        "jp": "\u6700\u9ad8\u3067\u3059\uff01",
        "vi": "Tuyet voi!",
        "katakana": "\u30c8\u30a5\u30a4\u30a7\u30c3\u30c8 \u30f4\u30a9\u30a4"
      },
      {
        "cat": "compliment",
        "title": "\u3042\u308a\u304c\u3068\u3046\uff08\u5f37\uff09",
        "jp": "\u672c\u5f53\u306b\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002",
        "vi": "Cam on nhieu.",
        "katakana": "\u30ab\u30e0 \u30aa\u30f3 \u30cb\u30a8\u30a6"
      },
      {
        "cat": "payment",
        "title": "\u4f1a\u8a08",
        "jp": "\u304a\u4f1a\u8a08\u304a\u9858\u3044\u3057\u307e\u3059\u3002",
        "vi": "Tinh tien, lam on.",
        "katakana": "\u30c6\u30a3\u30f3 \u30c6\u30a3\u30a8\u30f3 \u30e9\u30e0 \u30aa\u30f3"
      },
      {
        "cat": "payment",
        "title": "\u30ec\u30b7\u30fc\u30c8",
        "jp": "\u30ec\u30b7\u30fc\u30c8\uff08\u8acb\u6c42\u66f8\uff09\u3092\u304f\u3060\u3055\u3044\u3002",
        "vi": "Cho toi hoa don.",
        "katakana": "\u30c1\u30e7 \u30c8\u30a4 \u30db\u30a2 \u30c9\u30f3"
      },
      {
        "cat": "payment",
        "title": "\u30ab\u30fc\u30c9OK?",
        "jp": "\u30ab\u30fc\u30c9\u3067\u6255\u3048\u307e\u3059\u304b\uff1f",
        "vi": "Toi co the thanh toan bang the khong?",
        "katakana": "\u30c8\u30a4 \u30b3 \u30c6 \u30bf\u30f3 \u30c8\u30a2\u30f3 \u30d0\u30f3 \u30c6\u30fc \u30b3\u30f3"
      },
      {
        "cat": "payment",
        "title": "\u73fe\u91d1OK?",
        "jp": "\u73fe\u91d1\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u304b\uff1f",
        "vi": "Tien mat duoc khong?",
        "katakana": "\u30c6\u30a3\u30a8\u30f3 \u30de\u30c3\u30c8 \u30c9\u30a5\u30aa\u30c3\u30af \u30b3\u30f3"
      },
      {
        "cat": "payment",
        "title": "\u6301\u3061\u5e30\u308a",
        "jp": "\u6301\u3061\u5e30\u308a\u3067\u304d\u307e\u3059\u304b\uff1f",
        "vi": "Toi co the mang di khong?",
        "katakana": "\u30c8\u30a4 \u30b3 \u30c6 \u30de\u30f3 \u30ba\u30a3\u30fc \u30b3\u30f3"
      },
      {
        "cat": "toast",
        "title": "\u4e7e\u676f",
        "jp": "\u4e7e\u676f\uff01",
        "vi": "Mot, hai, ba, dzo!",
        "katakana": "\u30e2\u30c3 \u30cf\u30a4 \u30d0\u30fc \u30ba\u30a9"
      },
      {
        "cat": "help",
        "title": "\u52a9\u3051\u3066",
        "jp": "\u52a9\u3051\u3066\u304f\u3060\u3055\u3044\u3002",
        "vi": "Lam on giup toi.",
        "katakana": "\u30e9\u30e0 \u30aa\u30f3 \u30ba\u30e5\u30c3\u30d7 \u30c8\u30a4"
      },
      {
        "cat": "help",
        "title": "\u308f\u304b\u308a\u307e\u305b\u3093",
        "jp": "\u5206\u304b\u308a\u307e\u305b\u3093\u3002",
        "vi": "Toi khong hieu.",
        "katakana": "\u30c8\u30a4 \u30b3\u30f3 \u30d2\u30a8\u30a6"
      },
      {
        "cat": "help",
        "title": "\u3082\u3046\u4e00\u56de",
        "jp": "\u3082\u3046\u4e00\u5ea6\u8a00\u3063\u3066\u304f\u3060\u3055\u3044\u3002",
        "vi": "Noi lai mot lan nua, duoc khong?",
        "katakana": "\u30ce\u30a4 \u30e9\u30a4 \u30e2\u30c3 \u30e9\u30f3 \u30cc\u30a2 \u30c9\u30a5\u30aa\u30c3\u30af \u30b3\u30f3"
      }
    ];

    const statusEl = document.getElementById('status');
    const categoryNavRoot = document.getElementById('category-nav');
    const phrasesRoot = document.getElementById('phrases');
    const stopAllBtn = document.getElementById('stop-all');

    function setCategoryOpen(blockEl, open) {
      if (!blockEl) return;
      blockEl.dataset.open = open ? '1' : '0';
      const headBtn = blockEl.querySelector('.category-head');
      if (headBtn) headBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
    }

    function setStatus(message) {
      statusEl.textContent = message || '';
    }

    function isSpeechAvailable() {
      return 'speechSynthesis' in window && 'SpeechSynthesisUtterance' in window;
    }

    function findVoice(preferredLang) {
      const voices = window.speechSynthesis.getVoices();
      if (!voices || voices.length === 0) return null;
      const match = voices.find(v => (v.lang || '').toLowerCase().startsWith(preferredLang.toLowerCase()));
      return match || null;
    }

    function speak(text, lang) {
      if (!isSpeechAvailable()) {
        setStatus('\u3053\u306e\u30d6\u30e9\u30a6\u30b6\u306f\u97f3\u58f0\u8aad\u307f\u4e0a\u3052\u306b\u672a\u5bfe\u5fdc\u3067\u3059\u3002');
        return;
      }

      window.speechSynthesis.cancel();

      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = lang;
      utterance.rate = (lang || '').toLowerCase().startsWith('vi') ? 0.92 : 0.98;
      utterance.pitch = 1.0;

      const voice = findVoice(lang);
      if (voice) utterance.voice = voice;

      utterance.onstart = () => setStatus('\u518d\u751f\u4e2d: ' + lang + ' / ' + text);
      utterance.onend = () => setStatus('');
      utterance.onerror = () => setStatus('\u97f3\u58f0\u306e\u518d\u751f\u306b\u5931\u6557\u3057\u307e\u3057\u305f\uff08\u74b0\u5883\u306e\u97f3\u58f0\u8a2d\u5b9a\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\uff09\u3002');

      window.speechSynthesis.speak(utterance);

      if (!voice && (lang || '').toLowerCase().startsWith('vi')) {
        setStatus('\u6ce8\u610f: \u30d9\u30c8\u30ca\u30e0\u8a9e\u97f3\u58f0\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\uff08\u7aef\u672b\u306b\u97f3\u58f0\u304c\u7121\u3044\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\uff09\u3002');
      }
    }

    function stopAll() {
      if (isSpeechAvailable()) {
        window.speechSynthesis.cancel();
        setStatus('\u505c\u6b62\u3057\u307e\u3057\u305f\u3002');
        setTimeout(() => setStatus(''), 800);
      }
    }

    function autoTone(katakana) {
      const text = (katakana || '').trim();
      if (!text) return '';
      const parts = text.split(/(\s+)/);
      const arrows = [TONE.up, TONE.down];
      let wordIndex = 0;
      const out = parts.map(part => {
        if (/^\s+$/.test(part)) return part;
        const arrow = arrows[wordIndex % arrows.length];
        wordIndex += 1;
        return part + arrow;
      });
      return out.join('');
    }

    function buildPhraseCard(item, index) {
      const wrap = document.createElement('article');
      wrap.className = 'phrase';

      const header = document.createElement('div');
      header.className = 'phrase-header';

      const title = document.createElement('div');
      title.className = 'phrase-title';
      title.textContent = (index + 1) + '. ' + item.title;

      const actions = document.createElement('div');
      actions.className = 'phrase-actions';

      const vnBtn = document.createElement('button');
      vnBtn.className = 'btn primary';
      vnBtn.type = 'button';
      vnBtn.textContent = UI.labels.playVN;
      vnBtn.addEventListener('click', () => speak(item.vi, 'vi-VN'));
      actions.appendChild(vnBtn);

      header.appendChild(title);
      header.appendChild(actions);

      const body = document.createElement('div');
      body.className = 'phrase-body';

      const rows = [
        { label: UI.labels.jp, text: item.jp },
        { label: UI.labels.vi, text: item.vi },
        { label: UI.labels.kataTone, text: item.katakanaTone || autoTone(item.katakana), small: true }
      ];

      for (const r of rows) {
        const row = document.createElement('div');
        row.className = 'row';

        const label = document.createElement('div');
        label.className = 'label';
        label.textContent = r.label;

        const text = document.createElement('div');
        text.className = r.small ? 'text small' : 'text';
        text.textContent = r.text;

        row.appendChild(label);
        row.appendChild(text);
        body.appendChild(row);
      }

      wrap.appendChild(header);
      wrap.appendChild(body);
      return wrap;
    }

    function render() {
      document.getElementById('nav-accent').textContent = UI.navAccent;
      document.getElementById('nav-title').textContent = UI.navTitle;
      document.getElementById('back-link').textContent = UI.back;
      stopAllBtn.textContent = UI.stop;
      document.getElementById('page-title').textContent = UI.title;
      document.getElementById('page-subtitle').textContent = UI.subtitle;
      document.getElementById('note').textContent = UI.note;

      categoryNavRoot.innerHTML = '';
      for (const cat of CATEGORIES) {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'btn';
        btn.textContent = cat.label;
        btn.addEventListener('click', () => {
          const target = document.getElementById('cat-' + cat.id);
          if (target) {
            setCategoryOpen(target, true);
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
        categoryNavRoot.appendChild(btn);
      }

      phrasesRoot.innerHTML = '';
      CATEGORIES.forEach((cat, catIndex) => {
        const items = PHRASES.filter(p => p.cat === cat.id);

        const block = document.createElement('section');
        block.className = 'category-block';
        block.id = 'cat-' + cat.id;
        setCategoryOpen(block, catIndex === 0);

        const head = document.createElement('button');
        head.type = 'button';
        head.className = 'category-head';
        head.setAttribute('aria-expanded', catIndex === 0 ? 'true' : 'false');
        head.addEventListener('click', () => {
          const isOpen = block.dataset.open !== '0';
          setCategoryOpen(block, !isOpen);
        });

        const title = document.createElement('div');
        title.className = 'category-title';
        title.textContent = cat.label;

        const count = document.createElement('div');
        count.className = 'category-count';
        count.textContent = String(items.length);

        head.appendChild(title);
        head.appendChild(count);

        const grid = document.createElement('div');
        grid.className = 'category-phrases';
        items.forEach((p, i) => grid.appendChild(buildPhraseCard(p, i)));

        block.appendChild(head);
        block.appendChild(grid);
        phrasesRoot.appendChild(block);
      });

      if (!isSpeechAvailable()) {
        setStatus('\u3053\u306e\u30d6\u30e9\u30a6\u30b6\u306f\u97f3\u58f0\u8aad\u307f\u4e0a\u3052\u306b\u672a\u5bfe\u5fdc\u3067\u3059\uff08\u8868\u793a\u306e\u307f\u3067\u7df4\u7fd2\u3067\u304d\u307e\u3059\uff09\u3002');
      }
    }

    stopAllBtn.addEventListener('click', stopAll);

    if (isSpeechAvailable()) {
      window.speechSynthesis.onvoiceschanged = () => {};
    }

    render();
  </script>
</body>
</html>
